<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quick Start · FLOWFarm.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FLOWFarm.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Intro</a></li><li class="is-active"><a class="tocitem" href>Quick Start</a><ul class="internal"><li><a class="tocitem" href="#(1)-Setting-up-the-problem-description"><span>(1) Setting up the problem description</span></a></li><li><a class="tocitem" href="#(2)-Setting-up-the-analysis-models"><span>(2) Setting up the analysis models</span></a></li><li><a class="tocitem" href="#(3)-Running-the-analysis"><span>(3) Running the analysis</span></a></li></ul></li><li><a class="tocitem" href="../How_to/">Guided Examples</a></li><li><a class="tocitem" href="../Explanation/">Theory</a></li><li><a class="tocitem" href="../Reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Quick Start</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quick Start</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/FLOWFarm.jl/blob/master/docs/src/Tutorial.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>This tutorial covers the basics of FlowFARM. For more specifics refer to the <a href="../How_to/">How-to guide</a>.</p><p>There are three main steps to setting up and running an analysis in FLOWFarm:</p><ul><li>(1) setting up the problem description</li><li>(2) setting up the analysis model set</li><li>(3) running the analysis</li></ul><p>Details for setting up an optimization will depend heavily on the optimization package you are using, your objective, and your design variables. Optimization examples using various packages are provided in the example scripts located in the test  directory.</p><h2 id="(1)-Setting-up-the-problem-description"><a class="docs-heading-anchor" href="#(1)-Setting-up-the-problem-description">(1) Setting up the problem description</a><a id="(1)-Setting-up-the-problem-description-1"></a><a class="docs-heading-anchor-permalink" href="#(1)-Setting-up-the-problem-description" title="Permalink"></a></h2><pre><code class="language-julia hljs">import FLOWFarm; const ff = FLOWFarm

# define the rotor diameter
diameter = 80.0

# set initial turbine x and y locations
turbine_x = [-3.0, 0.0, 3.0, 0.0, 0.0, -1.5, 0.0, 1.5, 0.0].*diameter
turbine_y = [0.0, 3.0, 0.0, -3.0, 0.0, 0.0, 1.5, 0.0, -1.5].*diameter

# calculate the number of turbines
nturbines = length(turbine_x)

# set turbine base heights
turbine_z = zeros(nturbines)

# set turbine yaw values
turbine_yaw = zeros(nturbines)

# set turbine design parameters
rotor_diameter = zeros(nturbines) .+ diameter   # m
hub_height = zeros(nturbines) .+ 70.0           # m
cut_in_speed = zeros(nturbines) .+4.            # m/s
cut_out_speed = zeros(nturbines) .+25.          # m/s
rated_speed = zeros(nturbines) .+16.            # m/s
rated_power = zeros(nturbines) .+2.0E6          # W
generator_efficiency = zeros(nturbines) .+ 0.944

# Rotor swept area sample points (normalized by rotor radius). These arrays define which
# which points on the rotor swept area should be used to estimate the effective inflow
# wind speed for each wind turbine. Values of 0.0 are at the rotor hub, 1.0 is at the blade
tip. z is vertical, and y is horizontal. These points track the rotor yaw.
rotor_points_y = [0.0]
rotor_points_z = [0.0]

# set flow parameters
wind_speed = 8.0        # m/2
air_density = 1.1716    # kg/m^3
ambient_ti = 0.077      # %
shearexponent = 0.15
winddirections = [275.0*pi/180.0, 0.0, pi]          # radians
windspeeds = [wind_speed, wind_speed, wind_speed]   # m/s
windprobabilities = [1.0/3.0,1.0/3.0,1.0/3.0]       # %
ambient_tis = [ambient_ti, ambient_ti, ambient_ti]  # %
measurementheight = [hub_height[1], hub_height[1], hub_height[1]]   # m

# initialize the wind shear model
wind_shear_model = ff.PowerLawWindShear(shearexponent)

# initialize the wind resource definition
windresource = ff.DiscretizedWindResource(winddirections, windspeeds, windprobabilities, 
measurementheight, air_density, ambient_tis, wind_shear_model)
</code></pre><h2 id="(2)-Setting-up-the-analysis-models"><a class="docs-heading-anchor" href="#(2)-Setting-up-the-analysis-models">(2) Setting up the analysis models</a><a id="(2)-Setting-up-the-analysis-models-1"></a><a class="docs-heading-anchor-permalink" href="#(2)-Setting-up-the-analysis-models" title="Permalink"></a></h2><p>A model set requires a Wake Deficit Model, Wake Deflection Model, Wake Combination Model, and a Local Turbulence Intensity Model</p><ul><li>Deficit Models: JensenTopHat, JensenCosine, MultiZone, GaussOriginal, GaussYaw, GaussYawVariableSpread, GaussSimple</li><li>Deflection Models: GaussYawDeflection, GaussYawVariableSpreadDeflection, JiminezYawDeflection, MultizoneDeflection</li><li>Combination Models: LinearFreestreamSuperposition, SumOfSquaresFreestreamSuperposition, SumOfSquaresLocalVelocitySuperposition, LinearLocalVelocitySuperposition</li><li>Turbulence Models: LocalTIModelNoLocalTI, LocalTIModelMaxTI</li></ul><p>The model set can be set up as follows:</p><p>Initialize power model (this is a simple power model based only on turbine design and is not accurate. For examples on how to use more accurate power models, look at the example optimization scripts)</p><pre><code class="language-julia hljs">power_model = ff.PowerModelPowerCurveCubic()</code></pre><p>The user can define different power models for different wind turbines, but here we use the same power model for every turbine. The initialization of the power_models vector is important for optmization using algorithmic differentiation via the ForwardDiff.jl package.</p><pre><code class="language-julia hljs">power_models = Vector{typeof(power_model)}(undef, nturbines)
for i = 1:nturbines
    power_models[i] = power_model
end</code></pre><p>Initialize thrust model. The user can provide a complete thrust curve. See the example scripts for details on initializing them. The initialization of ct_models vector is important for optmization using algorithmic differentiation via the ForwardDiff.jl package.</p><pre><code class="language-julia hljs">ct_model = ff.ThrustModelConstantCt(0.65)
ct_models = Vector{typeof(ct_model)}(undef, nturbines)
for i = 1:nturbines
    ct_models[i] = ct_model
end</code></pre><p>Set up wake and related models. Here we will use the default values provided in FLOWFarm. However, it is important to use the correct model parameters. More information and references are provided in the doc strings attached to each model.</p><p>The wake deficit model predicts the impact of wind turbines wake on the wind speed.</p><pre><code class="language-julia hljs">wakedeficitmodel = ff.GaussYaw()</code></pre><p>The wake deflection model predicts the cross-wind location of the center of a wind turbine wake.</p><pre><code class="language-julia hljs">wakedeflectionmodel = ff.GaussYawDeflection()</code></pre><p>The wake combination model defines how the predicted deficits in each wake should be combined to predict the total deficit at a point</p><pre><code class="language-julia hljs">wakecombinationmodel = ff.LinearLocalVelocitySuperposition()</code></pre><p>The local turbulence intensity models can be used to estimate the local turbulence intensity at each wind turbine or point to provide more accurate input information to the wake and deflection models if applicable.</p><pre><code class="language-julia hljs">localtimodel = ff.LocalTIModelMaxTI()</code></pre><p>Initialize model set. This is just a convenience container for the analysis models.</p><pre><code class="language-julia hljs">model_set = ff.WindFarmModelSet(wakedeficitmodel, wakedeflectionmodel, wakecombinationmodel, localtimodel)</code></pre><h2 id="(3)-Running-the-analysis"><a class="docs-heading-anchor" href="#(3)-Running-the-analysis">(3) Running the analysis</a><a id="(3)-Running-the-analysis-1"></a><a class="docs-heading-anchor-permalink" href="#(3)-Running-the-analysis" title="Permalink"></a></h2><p>Calculate AEP</p><pre><code class="language-julia hljs">
    AEP = ff.calculate_aep(turbine_x, turbine_y, turbine_z, rotor_diameter,
        hub_height, turbine_yaw, ct_models, generator_efficiency, cut_in_speed,
        cut_out_speed, rated_speed, rated_power, windresource, power_models, model_set,
        rotor_sample_points_y=rotor_points_y, rotor_sample_points_z=rotor_points_z)
</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Intro</a><a class="docs-footer-nextpage" href="../How_to/">Guided Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Thursday 12 August 2021 17:22">Thursday 12 August 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
